<!DOCTYPE html>
<html>
<head>
  <title>Audio Input Lab</title>
  <meta name="viewport" content="minimum-scale=1.0, width=device-width, maximum-scale=1.0, initial-scale=1.0, user-scalable=no">
  
	<link rel="stylesheet" href="/js/jquery.mobile-1.4.5.min.css">
	<link rel="shortcut icon" href="/favicon.ico">
	<script src="/js/jquery.min.js"></script>
	<script src="/js/jquery.mobile-1.4.5.min.js"></script>
  <script src="/js/common_lib.js"></script>
  
  <script>
    const constraints = {
      audio: true
    };
    
    const audio = document.querySelector('audio');

    navigator.mediaDevices.getUserMedia(constraints).
      then((stream) => {audio.srcObject = stream});
  
    function hasGetUserMedia() {
      return !!(navigator.mediaDevices &&
        navigator.mediaDevices.getUserMedia);
    }

    
      
  </script>
</head>

<body style="width:auto;">
  <div data-role="page">
    <div data-role="header" data-position="fixed">
		  <h1>Audio Input Lab</h1>
	  </div>	

    <div data-role="main" style="height:85vh; overflow-y:scroll; -webkit-overflow-scrolling:touch;" data-position="fixed">
      <audio controls>
        <source src="/data/voice.amr" type="audio/mp3">        
      </audio>
    </div>
    
    <div data-role="footer" data-position="fixed">
      <table width=100% cellpadding=1 cellspacing=1>
      <thead>
        <tr><td></td></tr>
      </thead>
      <tbody>
        <tr id="text_send">
          <td width="78%" id="msg_area"><textarea id="s_message" name="s_message" autofocus data-role="none" class="s_message"></textarea></td>
          <td id="btn_msg_send" align=center valign=bottom><a href="javascript:sendMessage($group_id, $user_id);"><img src="/images/send.png" width="40px"></a></td>
          <td id="btn_attach_file" align=center><a href="javascript:attachFile();"><img src="/images/attachment.png" width="30px"></a></td>
          <td id="btn_audio_input" align=center><a href="javascript:audioInput();"><img src="/images/mic.png" width="20px"></a></td>          
        </tr>        
      </tbody>
      </table>
    </div>
  </div>
</body>
</html>
